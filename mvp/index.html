<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link rel="stylesheet" href="main.css">
    <title>BMMN</title>

</head>

<body>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="population.json.js"></script>
    <script src="geo_json_data.json.js"></script>
    <script src="choropleth.js"></script>
    <script src="d3-tip.js"></script>
    <script src="finCharts.js"></script>
    <script src="enrollCharts.js"></script>
    
    <!-- tooltip -->
    <div id="tooltip" class="hidden">
        <p><strong>State</strong></p>
        <p><span id="value">100</span>%</p>
    </div>

    <nav class="navbar navbar-dark fixed-top bg-primary flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">BMMN</a>
        <input type="text" class="form-control form-control-primary w-100" placeholder="Search...">
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="#">Logout</a>
            </li>
        </ul>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 bg-light d-none d-md-block sidebar">
                <div class="left-sidebar">
                    <ul class="nav flex-column sidebar-nav">
                        <!-- sidebar enrollment -->
                        <li class="nav-item">
                            <a id="enroll" class="nav-link active" href="#enrollment">
                                <i class="fas fa-user-graduate mr-2"></i>
                                Enrollment
                            </a>
                        </li>

                        <!-- sidebar financial -->
                        <li class="nav-item">
                            <a id="fin" class="nav-link" href="#fin">
                                <i class="fas fa-money-check-alt mr-2"></i>
                                Financial
                            </a>
                        </li>

                        <!-- sidebar achievement -->
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-trophy mr-2"></i>
                                <!-- <svg class="bi bi-chevron-right" width="16" height="16" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M6.646 3.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L12.293 10 6.646 4.354a.5.5 0 010-.708z" clip-rule="evenodd" /></svg> -->
                                Achievement
                            </a>
                        </li>

                        <!-- sidebar extras -->
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-chart-line mr-2"></i>
                                Extras
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- main body -->
    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
        <h3 style="margin-top: -80px;">BMMN Open Data Portal - US Education</h3>
        <hr>

        <!-- Dark table -->
        <div class="map-graph">
            <svg id="choropleth" width="600" height="400"></svg>
        </div>

        <h3>Graphs</h3>
        <hr>
        <div class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Graph 1</h5>
                        <svg id="Chart1" class="chart1" width="500" height="400"></svg>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Graph 2</h5>
                        <svg id="Chart2" class="chart1" width="500" height="400"></svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Graph 3</h5>
                        <svg id="Chart3" class="chart1" width="500" height="400"></svg>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Graph 4</h5>
                        <svg id="Chart4" class="chart1" width="500" height="400"></svg>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- script -->
    <script>
        var svgMap = d3.select("#choropleth");
        var svgFinChart1 = d3.select("#Chart1");
        var svgFinChart2 = d3.select("#Chart2");
        var svgFinChart3 = d3.select("#Chart3");
        var svgFinChart4 = d3.select("#Chart4");
        var svgEnrollChart1 = d3.select("#Chart1");
        var svgEnrollChart2 = d3.select("#Chart2");
        var svgEnrollChart3 = d3.select("#Chart3");
        var svgEnrollChart4 = d3.select("#Chart4");

        var last_clicked = 'Nothing'

        function vizMapper (state_passed){

            if(last_clicked=='fin'){
                FIN1.drawMap(svgFinChart1, state_passed);
                FIN2.drawMap(svgFinChart2, state_passed);
                FIN3.drawMap(svgFinChart3, state_passed);
                FIN4.drawMap(svgFinChart4, state_passed);
            }

        };

        MAP = Map();
        MAP.drawMap(svgMap);

        MAP.dispatch.on(
            "selected",
            function(key) {
                vizMapper(key);
            } 
        );

        $('#fin').on('click', function () {

            last_clicked = 'fin';

            FIN1 = finMap1();
            FIN1.drawMap(svgFinChart1);

            FIN2 = finMap2();
            FIN2.drawMap(svgFinChart2);

            FIN3 = finMap3();
            FIN3.drawMap(svgFinChart3);

            FIN4 = finMap4();
            FIN4.drawMap(svgFinChart4);

        })

        $('#enroll').on('click', function () {

            ENR1 = enrollMap1();
            ENR1.drawMap(svgEnrollChart1);

            ENR2 = enrollMap2();
            ENR2.drawMap(svgEnrollChart2);

            ENR3 = enrollMap3();
            ENR3.drawMap(svgEnrollChart3);

            ENR4 = enrollMap4();
            ENR4.drawMap(svgEnrollChart4);

        })

    </script>



</html>
